pipeline {
    agent any
    parameters {
        text defaultValue: 'dhruvbdemo', name: 'reponame'
    }
  
    stages {
        stage('Build') {
            steps {
                sh "aws ecr create-repository --repository-name ${params.reponame}"
                sh "docker build -t dhruvb ."
                sh "docker tag dhruvb:latest 492538659766.dkr.ecr.us-east-1.amazonaws.com/dhruvb:latest"
                sh "docker push 492538659766.dkr.ecr.us-east-1.amazonaws.com/dhruvb:latest"
            }
        }
        
    }
}
